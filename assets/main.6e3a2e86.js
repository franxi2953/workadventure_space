import"https://unpkg.com/@workadventure/scripting-api-extra@^1";WA.onInit().then(()=>{for(var e=[],a=[],n=36;n<=42;n++)e.push([n,18]),a.push([n,19]);e.push([44,18]),e.push([45,18]),a.push([44,19]),l(a,e,"fence","block","Special/Block"),l(e,[],"fence","fence_c","above_player_1"),l([[42,18],[45,18]],[],"fence","fence_r","above_player_1"),l([[37,18],[39,18],[41,18]],[],"fence","bench_u","above_player_3"),l([[38,18],[40,18],[42,18]],[],"fence","flag_u","above_player_3"),f()});function f(){WA.controls.disablePlayerControls(),i()}async function i(e=0){for(var a=[69,26],n=69*5+2,t=34+3,r=0;r<6;r++)for(var o=0;o<3;o++)WA.room.setTiles([{x:a[0]-parseInt(e/5)+r,y:a[1]+o,tile:2587+724+r+45*o+e%5*6,layer:"train"},{x:a[0]-parseInt(e/5)+r,y:a[1]+o,tile:1,layer:"above_player_1"}]);var c=20+u(t-e/5,0,2)*100;if(e/5==t){c=2e3;var s=await WA.player.getPosition();console.log(s),await WA.player.moveTo(s.x,s.y-100,10),setTimeout(function(){WA.room.setTiles([{x:35,y:27,tile:"block",layer:"Special/Block"}]),WA.controls.restorePlayerControls()},1e3)}e<n&&setTimeout(function(){i(e+1)},c)}function u(e,a,n){return Math.exp(-Math.pow(e-a,2)/(2*Math.pow(n,2)))}function l(e,a,n,t,r){WA.room.area.onEnter(n).subscribe(()=>{e.forEach(function(o){WA.room.setTiles([{x:o[0],y:o[1],tile:t,layer:r}])}),a.forEach(function(o){WA.room.setTiles([{x:o[0],y:o[1],tile:null,layer:r}])})}),WA.room.area.onLeave(n).subscribe(()=>{a.forEach(function(o){WA.room.setTiles([{x:o[0],y:o[1],tile:t,layer:r}])}),e.forEach(function(o){WA.room.setTiles([{x:o[0],y:o[1],tile:null,layer:r}])})})}

import"https://unpkg.com/@workadventure/scripting-api-extra@^1";WA.onInit().then(()=>{for(var o=[],r=[],n=36;n<=42;n++)o.push([n,18]),r.push([n,19]);o.push([44,18]),o.push([45,18]),r.push([44,19]),t(r,o,"fence","block","Special/Block"),t(o,[],"fence","fence_c","above_player_1"),t([[42,18],[45,18]],[],"fence","fence_r","above_player_1"),t([[37,18],[39,18],[41,18]],[],"fence","bench_u","above_player_3"),t([[38,18],[40,18],[42,18]],[],"fence","flag_u","above_player_3"),f()});function f(){WA.controls.disablePlayerControls(),i()}async function i(o=0){for(var r=[69,26],n=69*4+2,l=34+3,a=0;a<6;a++)for(var e=0;e<3;e++)WA.room.setTiles([{x:r[0]-parseInt(o/4)+a,y:r[1]+e,tile:1+a+30*e+o%4*6,layer:"train"}]);if(o%4==0)for(var e=0;e<3;e++)WA.room.setTiles([{x:r[0]-parseInt(o/4)+6,y:r[1]+e,tile:null,layer:"train"}]);var c=20+u(l-o/4,0,4)*100;if(o/4==l){c=2e3;var s=await WA.player.getPosition();console.log(s),await WA.player.moveTo(s.x,s.y-100,10),setTimeout(function(){WA.room.setTiles([{x:35,y:27,tile:"block",layer:"Special/Block"}]),WA.controls.restorePlayerControls()},1e3)}o<n&&setTimeout(function(){i(o+1)},c)}function u(o,r,n){return Math.exp(-Math.pow(o-r,2)/(2*Math.pow(n,2)))}function t(o,r,n,l,a){WA.room.area.onEnter(n).subscribe(()=>{o.forEach(function(e){WA.room.setTiles([{x:e[0],y:e[1],tile:l,layer:a}])}),r.forEach(function(e){WA.room.setTiles([{x:e[0],y:e[1],tile:null,layer:a}])})}),WA.room.area.onLeave(n).subscribe(()=>{r.forEach(function(e){WA.room.setTiles([{x:e[0],y:e[1],tile:l,layer:a}])}),o.forEach(function(e){WA.room.setTiles([{x:e[0],y:e[1],tile:null,layer:a}])})})}
